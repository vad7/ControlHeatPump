# ControlHeatPump
Контроллер теплового насоса

Проект "Народный контроллер" для тепловых насосов.<br>
Данное програмноое обеспечение предназначено для управления<br>
различными типами тепловых насосов для отопления и ГВС.<br>
<br>
Плата для контроллера продается здесь: http://vad-7.blogspot.com/2021/04/HPboard.html
<br>
<br>
Оттестированный релиз здесь: https://github.com/vad7/ControlHeatPump<br>
<br>
Изменения, доступные или вместе с платой или приобретаются отдельно:<br>
1. Поддержка символьного дисплея 20x4 символов (LCD2004), может работать совместно с Nextion.
2. ТН Воздух-Вода - полная поддержка, установка оборотов компрессора, ЭРВ.
3. Ежесуточные реле - переключение по температуре и по ночному тарифу
4. Дамп ячеек Modbus, загрузка файла дампа в устройство Modbus
5. Частотник Vacon: управление вентилятором, настройка мощности, контроль температуры, авто-сброс ошибки связи
6. Дисплей Nextion: описание ошибки ТН текстом на главном экране, отображение второго уличного датчика, исправление ошибок
7. Исправление множества ошибок в функциях: EEV, WR, Vacon, COP, Pumps, web
8. Корректировка ЭРВ при переходе отопление-бойлер
9. Опция включения циркуляционного насоса ГВС по расписанию
10. Возможность изменять аварийные границы датчиков температур через веб
11. Ограничение оборотов компрессора по времени
12. ГВС: использовать только тэн во время "расписание только для тэна"
13. Не считать статистику с меткой "во время работы" в переходных моментах бойлер-отопление и при возврате масла
14. Статистика - отдельно считается тэн бойлера
15. Пересоздание stats файлов при ошибке последовательности или длине=0
16. Исправление работы насосов в паузе
17. Исправление синхронизации времени, запрет смены часов во время работы ТН
18. Исправление скролбара в веб
19. Опция запрещать смену конкретного расписания
20. Исправление безопасного доступа через веб, из-за кэширования он не работал адекватно
21. Опция продолжения отопления после нагрева бойлера, если внутри гистерезиса
22. Отображение на веб о включении суточных реле
23. Корректировка минимальной мощности ваттроутера в зависимости текущей мощности с MPPT
24. Поддержку двунаправленного электро-счетчика DDS238-2 ZN/S
25. Настройки насосов отопления и дополнительного тэна перенесены в профили
26. Новый режим работы дополнительного тэна на выходе ТН - интеллектуальный, теперь их три: по дому, по улице, интеллектуально
27. Температура цели бойлера на схеме
28. Корректировка датчиков WiFi (esp8266)
29. Нагрев бойлера во время отсутствия электричества, если есть солнце
30. Перенос настройки выключения насоса после останова компрессора в профили, отдельная задача по управлению насосами, чтобы была возможность контроля температур цели.
31. Автопереключение режима работы - Отопление / Охлаждение
32. Возможность использовать несколько периодов включения одного и того же ежесуточного реле.
33. Возможность задать дополнительно любой датчик температуры как цель отопления. Расписание по часам контроля этих датчиков для каждого профиля.

<br><br>

Подробное обсуждение проекта на форуме: <br>
https://www.forumhouse.ru/threads/492563/


Скриншеты веб-интерфейса:

![Состояние](https://user-images.githubusercontent.com/6220128/56410007-3079bb00-6284-11e9-829b-f6a959f91073.png)
![Схема](https://user-images.githubusercontent.com/6220128/132807406-91645390-40a1-4f1e-b3aa-529ab1eba872.png)
![ЭРВ](https://user-images.githubusercontent.com/6220128/56410010-3079bb00-6284-11e9-9673-fb239037f33a.png)
![Настройки](https://user-images.githubusercontent.com/6220128/132806926-92010a49-bd0e-427d-a8c2-e4e657372f62.png)
![Расписание](https://user-images.githubusercontent.com/6220128/56410004-2fe12480-6284-11e9-8b03-78b331157580.png)
![Датчики](https://user-images.githubusercontent.com/6220128/56410001-2fe12480-6284-11e9-8cd5-69d094656276.png)
![Реле](https://user-images.githubusercontent.com/6220128/56410005-2fe12480-6284-11e9-8a4d-72b94401ffb2.png)
![Инвертор](https://user-images.githubusercontent.com/6220128/56410002-2fe12480-6284-11e9-8702-9bad735ddebe.png)
![RTOS](https://user-images.githubusercontent.com/6220128/56409998-2f488e00-6284-11e9-851b-1800e9cf688d.png)
![Графики](https://user-images.githubusercontent.com/6220128/56410245-1a202f00-6285-11e9-8991-ae68be600a8a.png)
![Графический лог](https://user-images.githubusercontent.com/6220128/56410000-2fe12480-6284-11e9-8b83-9b014c41a389.png)
![Статистика](https://user-images.githubusercontent.com/6220128/56410008-3079bb00-6284-11e9-97d6-145e7347cb60.png)
![Ваттроутер](https://user-images.githubusercontent.com/6220128/92506657-72572880-f20e-11ea-9791-e899aa069e9d.png)

Выносной экран Nextion:

![Nextion Main](https://user-images.githubusercontent.com/6220128/59842650-a15e5180-935f-11e9-894a-a86d4157c38c.png)
![Nextion Scheme](https://user-images.githubusercontent.com/6220128/59842761-d8346780-935f-11e9-878e-2635b119225a.png)
![Nextion Heat](https://user-images.githubusercontent.com/6220128/59842865-12056e00-9360-11e9-98db-e4ee1a1464a2.png)

Символьный дисплей LCD2004:

![image](https://user-images.githubusercontent.com/6220128/114034672-11b4ca80-9887-11eb-8aec-747a6301cb63.png)
