<html lang="ru">
<head> 
	<title>Уведомления help. Народный контроллер ТН</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="style.css">
	<script type='text/javascript' src='scripts.js'></script>
	<script type="text/javascript">
		window.onload = function() {
		loadParam("get_tblRelay");
	};
	</script>
</head>
<body class="help">
<div id="menu" class="menu"><script src="menu.js"></script></div>
<div class="content">
<h1>Описание настроек уведомлений НК
	<input style="float:none" type="submit" value="На страницу 'Уведомления'" onclick="location.href='notice.html'"></h1>
	<br/>
<!-- Код картинки внутри файла кодировка: http://translit-online.ru/image-base64-converter.html  форматирование строки (длина 1000):https://texttools.ru/add-line-breaks -->

<b>Уведомления в НК</b><br/>
НК может рассылать сообщения при каких либо происшедших событиях при работе. Такая рассылка сообщений называется уведомления. Сейчас реализовано отправка уведомлений на электронную почту
и SMS сообщений через внешние сервисы. Настройка уведомлений это важно - с их помощью пользователь информируется о работоспособности системы отопления,
внештатных ситуациях котороые происходят в доме.</br>
</br>
<b>Требуемые уведомления</b> - блок параметров описывающих какие сообщения надо рассылать. Настраивается в зависимости от нужд конкретного пользователя.<br/>
<b>Сброс контроллера</b> - это уведомление посылается после сброса контроллера. В уведомлении сообщается причина сброса конроллера:</br>
<i>General</i> - общий сброс, происходит когда подается питание или нажимается кнопка reset НК. Обычно такой сброс указывает на отключение питания НК (пропадание электросети).</br>
<i>Backup</i> - сброс при выходе из режима резервного копирования микроконтроллера, в НК не используется и его не должно быть.</br>
<i>Watchdog</i> - срабатывание сторожевого таймера. 'Плохой' признак, обычно это говорит, что произошло зацикливание программы (отдельная задача работает слишком долго)
и прошивка работает не корректно.</br>
<i>Software</i> - сброс который сгенерирован программно. НК можно сбросить удаленно, при этом будет Software reset.</br>
<i>User</i> - сброс с использование вывода NRST, в НК не используется (arduino due pin NRST pullup) и такого сброса не должно быть.</br>
<i>Unknown</i> - такого сброса не должно быть, это указывает на ошибку в прошивке НК.</br>
В web интерфейсе всегда можно посмотреть причину последнего сброса СЕРВИС->СИСТЕМА пункт 'Причина последнего сброса контроллера'</br>
<b>Возникновение ошибок</b> - В НК описано более 80 различных ошибок, при включении данной опции посылается уведомление об ошибке с ее описанием которая произошла.</br>
<b>Сигнал «жизни» (ежедневно в 12:00)</b> - включение данной опции приводит к посылке каждый день в 12 часов уведомления 'НК работает штатно'.
Если такого уведомления не пришло, то есть проблемы с НК или со связью у НК.</br>
<b>Достижение граничной температуры</b> - дополнительные условия контроля работы ТН. Если выбрана данная опция то отслеживается температура в доме, ГВС и нагнетание компрессора.
Это сделано для информирования пользователя о внештатной ситуации, когда еще нет аварийного останова. Например дом зимой находится в режиме поддержания температуры +10 градусов,
 а хулиганы кинули камень в окно и разбили стекло, и температура в доме начала понижаться. ТН работает пытаясь нагреть дом, но темпеартура падает. При настройке <b>Граничной температурв в доме </b>
 на +6 градусов и если температура понизится ниже +6 придет уведомление, и пользователь хотя бы обратит внимание что температура в доме падает, при работающем ТН.</br>
<b>Граничная температура в доме </b> - если меньше то посылается уведомление. Границы срабатывания условия.</br>
<b>Граничная температура бойлера</b> - если меньше то посылается уведомление. Границы срабатывания условия.</br>
<b>Граничная температура компрессора</b> - если больше то посылается уведомление. Границы срабатывания условия.</br>
<b>Проблемы с SD картой или SPI Flash</b> - при включении данной опции посылаются уведомления о проблемах с SD картой и/или SPI Flash.</br>
<b>Прочие уведомления</b> - все остальное не описанное в предыдущих пунктах.</br>
</br>
<b>Настройка отправки почты</b> - блок параметров для настройки отправки уведомлений на почту. НК позволяет отправлять почту ТОЛЬКО без шифрования соединения по SSL или TSL.
Это связно с тем что реализация такого шифрования является достаточно сложной задачей и требует вычислительных ресурсов и времени на реализацию. По этому ищите сервера SMTP без
шифрования, обычно крупные сервисы (google, yandex) имеют такие сервера, но только для своих пользователей (надо иметь почту).
Простых SMTP серверов без авторизации сейчас почти не осталось, т.к. через них удобно рассылать спам.</br>
<b>Посылать уведомления по почте</b>- включение данной опции разрешает НК отправлять уведомления (которые выбраны в секции выше) на почту параметры которой описаны ниже.<br/>
<b>Адрес smtp сервера</b> - адрес сервера, можно вводить как IP адрес, так и его имя. Для контроля слева от поля ввода выводится IP адрес который получен через DNS запрос. При вводе IP адреса, выводится тот-же адрес<br/>
<b>Порт smtp сервера </b> - порт на котором работает SMTP сервер. Обычно это 25 порт, но информацию надо уточнять у владельца сервера.<br/>
<b>Необходимость авторизации на сервере</b> - включение этой опции добавляет авторизацию при обмене данных. Обычно это опция включена, т.к. анонимных SMTP серверов почти не осталось. <br/>
<b>Логин для входа</b> - логин при авторизации на сервере. Обычно это адрес почты пользователя на сервере.<br/>
<b>Пароль для входа</b> - пароль для входа на сервер. Обычно это пароль почты пользователя на сервере.<br/>
<b>Добавлять в уведомление информацию о состоянии ТН</b> - включение данной опции добавляет к тексту уведомления краткую информацию о состянии ТН. Обычно это опция включена.<br/>
<b>Адрес отправителя</b> - адрес отправителя. Обычно это адрес пользователя на SMTP сервере через который проводится рассылка уведомления.<br/>
<b>Адрес получателя</b> - адрес получателя - куда оправить письмо.<br/>
<b>Отправить тестовое письмо</b> -  кнопка генерации тестового письма для проверки правильности настроек отправки почты. По завершению отправки на web интрефейсе выводится сообщение
с кодом возврата, который информирует об удачной/неудачной отправки письма. Надо добиться отправки и получения тестовых писем, иначе уведомления не будут приходить.<br/>
</br>
<b>Настройка отправки SMS</b> - блок параметров для настройки отправки уведомлений на телефон через SMS. В НК испольуются сторонние (большинство из них платные) сервисы.
На этих сервисах требуется регистрация и деньги для отправки SMS.</br>
<b>Посылать уведомления по SMS</b> - включение данной опции разрешает НК отправлять уведомления (которые выбраны в первой секции) на телефон через SMS параметры которой описаны ниже.</br>
<b>Сервис отправки SMS</b> - выбор сервиса для отправки. На сервисе должна быть регистрация.</br>
<b>API ID</b> - первый параметр на выбранном сервисе SMS, требуется для идентификация на сервисе. Получается при регистрации на сервисе.</br>
<b>none</b> - второй параметр на выбранном сервисе SMS, возможно что выбранный сервис требует только один параметр, тогда это поле остается пустым. Подробнее необходимо узнать на выбранном сервисе</br>
<b>Телефон получателя (формат 79161234567)</b> - телефон на котороый отправляется SMS. в международном формате, без '+' в начале номера.</br>
<b>Отправить тестовое SMS</b> - кнопка для отправки тестового SMS на телефон. По завершению отправки на web интрефейсе выводится сообщение
с кодом завершения, если это предусмотренно выбранным сервисом. Описание кода ищите на сервисе.</br>
</br>
</br>
</html>